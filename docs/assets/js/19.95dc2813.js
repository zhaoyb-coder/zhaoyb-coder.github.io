(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{498:function(s,e,a){"use strict";a.r(e);var t=a(30),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"k8s安装metrics-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#k8s安装metrics-server"}},[s._v("#")]),s._v(" k8s安装Metrics Server")]),s._v(" "),a("blockquote",[a("p",[s._v("用于支持 "),a("code",[s._v("kubectl top")]),s._v(" 命令，用于查看 pod 内存/CPU 使用情况")])]),s._v(" "),a("p",[s._v("Metrics Server 是一个 Kubernetes 组件，用于收集群集中的容器和节点的资源度量指标，并将这些指标提供给用户和其他组件。Metrics Server 采集的指标包括CPU使用率、内存使用率、网络流量等。这些指标可以帮助用户了解应用程序、服务以及它们所在的节点和容器的健康情况，帮助用户优化资源使用和应用程序性能")]),s._v(" "),a("h2",{attrs:{id:"_1、下载配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载配置文件"}},[s._v("#")]),s._v(" 1、下载配置文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/kubernetes-sigs/metrics-server/releases/download/v0.6.4/components.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2、修改-components-yaml-配置-不验证证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改-components-yaml-配置-不验证证书"}},[s._v("#")]),s._v(" 2、修改 components.yaml 配置，不验证证书")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/- args:/a \\ \\ \\ \\ \\ \\ \\ \\ - --kubelet-insecure-tls'")]),s._v(" components.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3、修改镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、修改镜像"}},[s._v("#")]),s._v(" 3、修改镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s|registry\\.k8s\\.io/metrics-server/metrics-server|docker.io/xuxiaoweicomcn/metrics-server|g'")]),s._v(" components.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_4、配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、配置"}},[s._v("#")]),s._v(" 4、配置")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kubectl apply -f components.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_5、查看-k8s-pod、svc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、查看-k8s-pod、svc"}},[s._v("#")]),s._v(" 5、查看 k8s pod、svc")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kubectl get pod,svc --all-namespaces -o wide\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_6、查看-k8s-pod-内存、cpu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、查看-k8s-pod-内存、cpu"}},[s._v("#")]),s._v(" 6、查看 k8s pod 内存、CPU")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kubectl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" pods --all-namespaces\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);