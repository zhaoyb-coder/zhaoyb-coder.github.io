(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{342:function(s,e,a){"use strict";a.r(e);var t=a(8),r=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"k8s安装metrics-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#k8s安装metrics-server"}},[s._v("#")]),s._v(" k8s安装Metrics Server")]),s._v(" "),e("blockquote",[e("p",[s._v("用于支持 "),e("code",[s._v("kubectl top")]),s._v(" 命令，用于查看 pod 内存/CPU 使用情况")])]),s._v(" "),e("p",[s._v("Metrics Server 是一个 Kubernetes 组件，用于收集群集中的容器和节点的资源度量指标，并将这些指标提供给用户和其他组件。Metrics Server 采集的指标包括CPU使用率、内存使用率、网络流量等。这些指标可以帮助用户了解应用程序、服务以及它们所在的节点和容器的健康情况，帮助用户优化资源使用和应用程序性能")]),s._v(" "),e("h2",{attrs:{id:"_1、下载配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载配置文件"}},[s._v("#")]),s._v(" 1、下载配置文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/kubernetes-sigs/metrics-server/releases/download/v0.6.4/components.yaml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_2、修改-components-yaml-配置-不验证证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改-components-yaml-配置-不验证证书"}},[s._v("#")]),s._v(" 2、修改 components.yaml 配置，不验证证书")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/- args:/a \\ \\ \\ \\ \\ \\ \\ \\ - --kubelet-insecure-tls'")]),s._v(" components.yaml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_3、修改镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、修改镜像"}},[s._v("#")]),s._v(" 3、修改镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s|registry\\.k8s\\.io/metrics-server/metrics-server|docker.io/xuxiaoweicomcn/metrics-server|g'")]),s._v(" components.yaml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_4、配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4、配置"}},[s._v("#")]),s._v(" 4、配置")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("kubectl apply "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" components.yaml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_5、查看-k8s-pod、svc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5、查看-k8s-pod、svc"}},[s._v("#")]),s._v(" 5、查看 k8s pod、svc")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("kubectl get pod,svc --all-namespaces "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_6、查看-k8s-pod-内存、cpu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6、查看-k8s-pod-内存、cpu"}},[s._v("#")]),s._v(" 6、查看 k8s pod 内存、CPU")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("kubectl "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" pods --all-namespaces\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);