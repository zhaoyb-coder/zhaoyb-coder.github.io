<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chrome 扩展插件开发 | 赵宇博的技术博客</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="沉淀，静待花开">
    
    <link rel="preload" href="/assets/css/0.styles.42a2c9ab.css" as="style"><link rel="preload" href="/assets/js/app.7a0728f8.js" as="script"><link rel="preload" href="/assets/js/2.1e4db32b.js" as="script"><link rel="preload" href="/assets/js/38.ba7dbc6d.js" as="script"><link rel="prefetch" href="/assets/js/10.7efe6867.js"><link rel="prefetch" href="/assets/js/11.511c0a34.js"><link rel="prefetch" href="/assets/js/12.9b58b774.js"><link rel="prefetch" href="/assets/js/13.ed0802d4.js"><link rel="prefetch" href="/assets/js/14.aa560177.js"><link rel="prefetch" href="/assets/js/15.c984db9b.js"><link rel="prefetch" href="/assets/js/16.093ae0c0.js"><link rel="prefetch" href="/assets/js/17.ce529c5c.js"><link rel="prefetch" href="/assets/js/18.8e20ff58.js"><link rel="prefetch" href="/assets/js/19.73b23a14.js"><link rel="prefetch" href="/assets/js/20.7523a2df.js"><link rel="prefetch" href="/assets/js/21.49151248.js"><link rel="prefetch" href="/assets/js/22.e8437352.js"><link rel="prefetch" href="/assets/js/23.35c7a608.js"><link rel="prefetch" href="/assets/js/24.885251ad.js"><link rel="prefetch" href="/assets/js/25.c6e546e3.js"><link rel="prefetch" href="/assets/js/26.20f05943.js"><link rel="prefetch" href="/assets/js/27.4e989696.js"><link rel="prefetch" href="/assets/js/28.01ca5fcb.js"><link rel="prefetch" href="/assets/js/29.c6ca9ffc.js"><link rel="prefetch" href="/assets/js/3.da628f8f.js"><link rel="prefetch" href="/assets/js/30.5bbe2551.js"><link rel="prefetch" href="/assets/js/31.57ab7c88.js"><link rel="prefetch" href="/assets/js/32.9182738e.js"><link rel="prefetch" href="/assets/js/33.96397894.js"><link rel="prefetch" href="/assets/js/34.c26055a1.js"><link rel="prefetch" href="/assets/js/35.e249869f.js"><link rel="prefetch" href="/assets/js/36.1c708ef7.js"><link rel="prefetch" href="/assets/js/37.4fc0770e.js"><link rel="prefetch" href="/assets/js/39.131015e3.js"><link rel="prefetch" href="/assets/js/4.beb55bf3.js"><link rel="prefetch" href="/assets/js/40.b3f95375.js"><link rel="prefetch" href="/assets/js/41.29653fc1.js"><link rel="prefetch" href="/assets/js/42.c670b19e.js"><link rel="prefetch" href="/assets/js/43.bd0b43e1.js"><link rel="prefetch" href="/assets/js/44.1553c10e.js"><link rel="prefetch" href="/assets/js/45.34801ec7.js"><link rel="prefetch" href="/assets/js/46.64b92c8a.js"><link rel="prefetch" href="/assets/js/47.fbc000bb.js"><link rel="prefetch" href="/assets/js/48.ac1713d7.js"><link rel="prefetch" href="/assets/js/49.5a4b6c59.js"><link rel="prefetch" href="/assets/js/5.d78e4b01.js"><link rel="prefetch" href="/assets/js/50.4f24ce1d.js"><link rel="prefetch" href="/assets/js/51.d07b44ff.js"><link rel="prefetch" href="/assets/js/52.ef6cc136.js"><link rel="prefetch" href="/assets/js/53.99a3a064.js"><link rel="prefetch" href="/assets/js/54.7fdd7323.js"><link rel="prefetch" href="/assets/js/55.b9c2e62b.js"><link rel="prefetch" href="/assets/js/56.3070ecbc.js"><link rel="prefetch" href="/assets/js/57.b9bf682e.js"><link rel="prefetch" href="/assets/js/58.e62b2d3a.js"><link rel="prefetch" href="/assets/js/59.93344ef2.js"><link rel="prefetch" href="/assets/js/6.1a306aa6.js"><link rel="prefetch" href="/assets/js/60.c4287126.js"><link rel="prefetch" href="/assets/js/61.6e12cea8.js"><link rel="prefetch" href="/assets/js/62.d3487e41.js"><link rel="prefetch" href="/assets/js/7.b5a10f25.js"><link rel="prefetch" href="/assets/js/8.72e18ad3.js"><link rel="prefetch" href="/assets/js/9.a9000ea7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.42a2c9ab.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="赵宇博的技术博客" class="logo"> <span class="site-name can-hide">赵宇博的技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/be/" class="nav-link">后端</a></div><div class="nav-item"><a href="/data/" class="nav-link">数据库专栏</a></div><div class="nav-item"><a href="/k8s/" class="nav-link">k8s专栏</a></div><div class="nav-item"><a href="/dcs/" class="nav-link">分布式专栏</a></div><div class="nav-item"><a href="/linux/" class="nav-link">Linux网络专栏</a></div><div class="nav-item"><a href="/self/" class="nav-link">手写系列专栏</a></div><div class="nav-item"><a href="/more/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/zhaoyb-coder" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/be/" class="nav-link">后端</a></div><div class="nav-item"><a href="/data/" class="nav-link">数据库专栏</a></div><div class="nav-item"><a href="/k8s/" class="nav-link">k8s专栏</a></div><div class="nav-item"><a href="/dcs/" class="nav-link">分布式专栏</a></div><div class="nav-item"><a href="/linux/" class="nav-link">Linux网络专栏</a></div><div class="nav-item"><a href="/self/" class="nav-link">手写系列专栏</a></div><div class="nav-item"><a href="/more/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/zhaoyb-coder" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue专栏</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/VUE01/" class="sidebar-link">VUE-概述</a></li><li><a href="/fe/VUE02/" class="sidebar-link">Vuex</a></li></ul></section></li><li><a href="/fe/c4479a/" aria-current="page" class="active sidebar-link">Chrome 扩展插件开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/fe/c4479a/#_1、基础介绍" class="sidebar-link">1、基础介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_1-1-基础结构" class="sidebar-link">1.1 基础结构</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_1-2-声明browser-action" class="sidebar-link">1.2 声明browser_action</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_1-3-commands-快捷键" class="sidebar-link">1.3 commands 快捷键</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/fe/c4479a/#_2、background-scripts" class="sidebar-link">2、background scripts</a></li><li class="sidebar-sub-header level2"><a href="/fe/c4479a/#_3、ui界面" class="sidebar-link">3、UI界面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_3-1-、popup-html" class="sidebar-link">3.1 、popup.html</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_3-2-popup-js" class="sidebar-link">3.2 popup.js</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/fe/c4479a/#_4、扩展存储api" class="sidebar-link">4、扩展存储API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_4-1、chrome扩展自身的localstorage" class="sidebar-link">4.1、chrome扩展自身的localStorage</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_4-2、chrome扩展存储api" class="sidebar-link">4.2、chrome扩展存储API</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/fe/c4479a/#_5、用户选项页面-option" class="sidebar-link">5、用户选项页面 （option）</a></li><li class="sidebar-sub-header level2"><a href="/fe/c4479a/#_6、书签管理" class="sidebar-link">6、书签管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_1、获取所有书签信息" class="sidebar-link">1、获取所有书签信息</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_2、获取某个节点的子树" class="sidebar-link">2、获取某个节点的子树</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_3、获取节点信息" class="sidebar-link">3、获取节点信息</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_4、获取所有的子节点" class="sidebar-link">4、获取所有的子节点</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_5、获取最近的书签" class="sidebar-link">5、获取最近的书签</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_6、搜索书签" class="sidebar-link">6、搜索书签</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_7、创建书签" class="sidebar-link">7、创建书签</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_8、移动书签" class="sidebar-link">8、移动书签</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_9、更新书签" class="sidebar-link">9、更新书签</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_10、删除书签或者空书签文件夹" class="sidebar-link">10、删除书签或者空书签文件夹</a></li><li class="sidebar-sub-header level3"><a href="/fe/c4479a/#_11、删除整个书签树" class="sidebar-link">11、删除整个书签树</a></li></ul></li></ul></li><li><a href="/pages/0f6a0ac99b62ede5/" class="sidebar-link">防抖与节流函数</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/fe/#前端" data-v-06225672>前端</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/zhaoyb-coder" target="_blank" title="作者" class="beLink" data-v-06225672>zhaoyb</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-12-04</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Chrome 扩展插件开发<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="chrome-扩展插件开发"><a href="#chrome-扩展插件开发" class="header-anchor">#</a> Chrome 扩展插件开发</h1> <h2 id="_1、基础介绍"><a href="#_1、基础介绍" class="header-anchor">#</a> 1、基础介绍</h2> <blockquote><p>扩展程序是定制浏览体验的小型软件程序。这些扩展程序能够使得用户根据个人需求或者偏好定制 Chrome 功能和行为。基于 HTML, JavaScript和 CSS 等 Web 技术构建。</p> <p>扩展程序由不同的组件构成，这些组件包含以下几种：</p> <ul><li>background scripts (运行在后台的脚本)</li> <li>content scripts (运行在页面的逻辑脚本)</li> <li>options page (页面)</li> <li>ui elements (UI元素)</li> <li>各种逻辑组件</li></ul></blockquote> <h3 id="_1-1-基础结构"><a href="#_1-1-基础结构" class="header-anchor">#</a> 1.1 基础结构</h3> <blockquote><p>Chrome 的扩展程序必须有一个manifest.json文件，文件用来描述APP信息以及其他资源加载路径，需要最基本的四个信息就可以实现一个hello-word扩展插件</p></blockquote> <div class="language-json line-numbers-mode"><pre class="language-json"><code>manifest.json

<span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;hello-word&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;你好，扩展插件&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;manifest_version&quot;</span><span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>浏览器加载已解压的扩展程序，如图所示，已经完成了一个最基础的扩展插件</p> <p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220216184229154.png" alt="image-20220216184229154"></p> <h3 id="_1-2-声明browser-action"><a href="#_1-2-声明browser-action" class="header-anchor">#</a> 1.2 声明browser_action</h3> <ul><li><p>popup</p> <blockquote><p>&quot;default_popup&quot;:&quot;popup.html&quot;</p> <p>在点击插件的时候会弹出弹框，弹框内容就是popup.html的内容，popup的内容在点击浏览器空白处会自动关闭</p> <p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220216185421661.png" alt="image-20220216185421661"></p></blockquote></li> <li><p>icon</p> <blockquote><p>&quot;default_icon&quot;:&quot;hello.png&quot;</p> <p>插件展示的默认图标</p></blockquote></li></ul> <h3 id="_1-3-commands-快捷键"><a href="#_1-3-commands-快捷键" class="header-anchor">#</a> 1.3 commands 快捷键</h3> <blockquote><p>commands属性用来配置快捷键 ，例如可以配置快捷键来直接唤醒程序，</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token property">&quot;_execute_browser_action&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//用来执行browser_action中的设置</span>
         <span class="token property">&quot;suggested_key&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
             <span class="token property">&quot;default&quot;</span><span class="token operator">:</span><span class="token string">&quot;Ctrl+Shift+F&quot;</span><span class="token punctuation">,</span> <span class="token comment">//默认win快捷键</span>
             <span class="token property">&quot;mac&quot;</span><span class="token operator">:</span><span class="token string">&quot;MacCtrl+Shift+F&quot;</span>
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;打开popup.html&quot;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></blockquote> <h2 id="_2、background-scripts"><a href="#_2、background-scripts" class="header-anchor">#</a> 2、background scripts</h2> <blockquote><p>使用流程：</p> <p>1、需要在maniifest.json文件中声明,使用background api</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;background&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;background.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token property">&quot;persistent&quot;</span><span class="token operator">:</span><span class="token boolean">false</span>  
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2、扩展程序一旦安装，会自动加载scripts标签定义的所有脚本，并查找需要监听的重要的事件，</p> <p>例如：脚本文件中需要持久化变量信息，使用runtime.onInstalled的侦听事件，在onInstalled监听事件中，脚本使用chrome的存储API设置一个value，后续所有的扩展程序组件都可以访问或者修改这个value</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>chrome<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>onInstalled<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'color is red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>3、由于上述脚本使用了storage权限，在扩展插件开发中，涉及到API的使用，必须要提前声明，需要在permissions字段注册才能使用。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;permissions&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;storage&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>代码示例：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//manifest.json</span>
<span class="token punctuation">{</span>
 <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;hello-word&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;你好，扩展插件&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;manifest_version&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
	<span class="token property">&quot;browser_action&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token property">&quot;default_popup&quot;</span><span class="token operator">:</span><span class="token string">&quot;popup.html&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	 <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token property">&quot;_execute_browser_action&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token property">&quot;suggested_key&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
             <span class="token property">&quot;default&quot;</span><span class="token operator">:</span><span class="token string">&quot;Ctrl+Shift+F&quot;</span><span class="token punctuation">,</span>
             <span class="token property">&quot;mac&quot;</span><span class="token operator">:</span><span class="token string">&quot;MacCtrl+Shift+F&quot;</span>
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token string">&quot;打开popup.html&quot;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;permissions&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;storage&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;background&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;background.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token property">&quot;persistent&quot;</span><span class="token operator">:</span><span class="token boolean">false</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// background.js</span>
chrome<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>onInstalled<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'color is red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220217100521607.png" alt="image-20220217100521607"></p></blockquote> <h2 id="_3、ui界面"><a href="#_3、ui界面" class="header-anchor">#</a> 3、UI界面</h2> <blockquote><p>UI界面主要有两个，browser_action 和page_action,使用的时候两个选择一个，不可以同时使用，</p> <p>主要区别：</p> <p>browser_action 提供的功能面向全部网站，插件图标一直是激活的状态</p> <p>page_action只针对对应网站提供的功能，插件需要配置激活规则，只有满足条件的网站才能使用插件，否则插件一直是灰色状态</p></blockquote> <h3 id="_3-1-、popup-html"><a href="#_3-1-、popup-html" class="header-anchor">#</a> 3.1 、popup.html</h3> <blockquote><p>在点击插件的时候会弹出弹框，弹框内容就是popup.html的内容，popup的内容在点击浏览器空白处会自动关闭</p> <p>popup.html与普通html页面的区别就是不能使用内联script</p></blockquote> <h3 id="_3-2-popup-js"><a href="#_3-2-popup-js" class="header-anchor">#</a> 3.2 popup.js</h3> <blockquote><p>实战：使用脚本控制当前页面的背景色</p> <p>popup.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> changeColor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;changeColor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

changeColor<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">active</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">currentWindow</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
			chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">executeScript</span><span class="token punctuation">(</span>
				tabs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span>
				<span class="token punctuation">{</span><span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">document.body.style.backgroundColor=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
			<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></blockquote> <h2 id="_4、扩展存储api"><a href="#_4、扩展存储api" class="header-anchor">#</a> 4、扩展存储API</h2> <blockquote><p>存储数据分为三类</p> <p>1、浏览器本身的localStorage（HTML5特性）</p> <p>2、chrome扩展自身的localStorage,需要注意content_script中的localStorage是存储在对应域名下的，别的域名不能访问，而background_script的localStorage是存储在chrome扩展下的，所有域名都可以访问，所以一般都会在background_script中存储公共信息，供所有页面使用。</p> <p>3、chrome扩展的存储API（需要声明storage权限）</p></blockquote> <h3 id="_4-1、chrome扩展自身的localstorage"><a href="#_4-1、chrome扩展自身的localstorage" class="header-anchor">#</a> 4.1、chrome扩展自身的localStorage</h3> <blockquote><p>1、localStorage属于key/value存储类型，如果想要存储对象格式 ，就必须以json字符的格式来存储，后续再处理解析</p> <p>2、API</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//增加</span>
localStorage<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'zhangsan'</span><span class="token punctuation">;</span> <span class="token operator">||</span> localStorage<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'zhangsan'</span><span class="token punctuation">;</span>
<span class="token comment">//修改</span>
localStorage<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lisi'</span><span class="token punctuation">;</span> <span class="token operator">||</span> localStorage<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'lisi'</span><span class="token punctuation">;</span>
<span class="token comment">//删除</span>
localStorage<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token operator">||</span>localStorage<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
<span class="token comment">//删除所有</span>
localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//查看</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> localStorage<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token operator">||</span> <span class="token keyword">var</span> name <span class="token operator">=</span> localStorage<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></blockquote> <h3 id="_4-2、chrome扩展存储api"><a href="#_4-2、chrome扩展存储api" class="header-anchor">#</a> 4.2、chrome扩展存储API</h3> <blockquote><p>1、可以看作是对localStorage的改进，可以将保存的数据写入本地磁盘，使用之前需要先声明storage权限</p> <p>（数据存储目录：C:\Users\Administrator\AppData\Local\Google\Chrome\User Data\Default\Local Extension Settings\扩展id）</p> <p>存储分为两种方式：sync和local，唯一的区别就是sync会开启当前用户的数据同步功能（不过由于墙的问题，大多数用户无法登录谷歌账户，也就不存在同步需求了）</p> <p>2、API</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//sync添加</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>value<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token comment">//添加成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//local添加</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>value<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token comment">//添加成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//sync读取</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//local读取</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取一个或多个数据所占用的总空间 getBytesInUse</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">getBytesInUse</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">byts</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span><span class="token function">getBytesInUse</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">byts</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>byts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
此处的 keys 只能为 <span class="token keyword">null</span>、字符串或包含多个字符串的数组

<span class="token comment">//删除数据 remove</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token comment">//删除成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token comment">//删除成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
keys 可以是字符串，也可以是包含多个字符串的数组

<span class="token comment">//删除所有数据 clear</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>sync<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token comment">//删除成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token comment">//删除成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//监听事件 onChange 当存储区的数据发生改变时，触发此方法</span>
chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>onChaged<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">changes<span class="token punctuation">,</span>storageArea</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 <span class="token comment">//callback() 会接收到两个参数，第一个为 changes，第二个是 StorageArea。changes 是词典对象，键为更改的属性名称，值包含两个属性，分别为 oldValue 和 newValue；StorageArea 为 local 或 sync。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div></blockquote> <h2 id="_5、用户选项页面-option"><a href="#_5、用户选项页面-option" class="header-anchor">#</a> 5、用户选项页面 （option）</h2> <h2 id="_6、书签管理"><a href="#_6、书签管理" class="header-anchor">#</a> 6、书签管理</h2> <blockquote><p>使用 <code>chrome.bookmarks</code> 能够创建、组织和操作书签，能够自定义操作书签的页面</p> <p>需要申请权限 [bookmarks]</p> <p><code>注意：无法使用 chrome.bookmarks API 添加或删除根文件夹中的条目。无法重命名、移动或删除特殊的 “书签栏” 和 “其他” 文件夹。</code></p></blockquote> <h3 id="_1、获取所有书签信息"><a href="#_1、获取所有书签信息" class="header-anchor">#</a> 1、获取所有书签信息</h3> <blockquote><p>chrome.bookmarks.getTree(function callback)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">getTree</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>返回数据示例：</p> <p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220419192054877.png" alt="image-20220419192054877"></p> <p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220419191620338.png" alt="image-20220419191620338"></p> <blockquote><p>通过这个方法能够拿到整个书签栏的树，而最外层就是根节点，根节点没有 title，根节点的两个子节点就是 <strong>书签栏</strong>和<strong>其他书签</strong>两个，id 分别是 1 和 2</p></blockquote> <h3 id="_2、获取某个节点的子树"><a href="#_2、获取某个节点的子树" class="header-anchor">#</a> 2、获取某个节点的子树</h3> <blockquote><p>chrome.bookmarks.getSubTree(string id, function callback)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">getSubTree</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">getSubTree(id) 需要传递id参数</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220420133825874.png" alt="image-20220420133825874"></p> <h3 id="_3、获取节点信息"><a href="#_3、获取节点信息" class="header-anchor">#</a> 3、获取节点信息</h3> <blockquote><p>chrome.bookmarks.get(string or array of string idOrIdList, function callback)</p> <p>需要注意的是，无论是什么 get 方法，每次都是返回一个 Array 类型，即使请求的是节点，返回的也是 Array,并且不会返回子节点信息</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>get<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'50'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220420134321289.png" alt="image-20220420134321289"></p> <h3 id="_4、获取所有的子节点"><a href="#_4、获取所有的子节点" class="header-anchor">#</a> 4、获取所有的子节点</h3> <blockquote><p>chrome.bookmarks.getChildren(string id, function callback)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>getChildren<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token string">'50'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220420134745826.png" alt="image-20220420134745826"></p> <h3 id="_5、获取最近的书签"><a href="#_5、获取最近的书签" class="header-anchor">#</a> 5、获取最近的书签</h3> <blockquote><p>chrome.bookmarks.getRecent(integer numberOfItems, function callback)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//返回最近创建的 3 个页签</span>
getRecent<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">getRecent</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220420135039546.png" alt="image-20220420135039546"></p> <h3 id="_6、搜索书签"><a href="#_6、搜索书签" class="header-anchor">#</a> 6、搜索书签</h3> <blockquote><p>chrome.bookmarks.search(string or object query, function callback)</p> <p>根据title和url属性进行不区分大小写的模糊匹配搜索页签节点数据</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;col-md-12&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>textarea id<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> cols<span class="token operator">=</span><span class="token string">&quot;30&quot;</span> rows<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>github<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;search&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn btn-primary&quot;</span><span class="token operator">&gt;</span>search<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

search<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20220420144805775.png" alt="image-20220420144805775"></p> <h3 id="_7、创建书签"><a href="#_7、创建书签" class="header-anchor">#</a> 7、创建书签</h3> <blockquote><p>chrome.bookmarks.create(object bookmark, function callback)</p> <p>创建一个书签，在指定的 <code>parentId</code> 下创建书签或文件夹。如果 url 为NULL或没有该字段，会创建一个文件夹。</p> <p>如果<code>parentId</code> 为1，则可以在根节点创建书签或文件夹</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;col-md-12&quot;</span><span class="token operator">&gt;</span>
    创建书签
父书签名：<span class="token operator">&lt;</span>textarea id<span class="token operator">=</span><span class="token string">&quot;pTitle&quot;</span> cols<span class="token operator">=</span><span class="token string">&quot;30&quot;</span> rows<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>父书签名<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
新书签名：<span class="token operator">&lt;</span>textarea id<span class="token operator">=</span><span class="token string">&quot;newTitle&quot;</span> cols<span class="token operator">=</span><span class="token string">&quot;30&quot;</span> rows<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>新书签名<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
新书签地址：<span class="token operator">&lt;</span>textarea id<span class="token operator">=</span><span class="token string">&quot;newUrl&quot;</span> cols<span class="token operator">=</span><span class="token string">&quot;30&quot;</span> rows<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>新书签地址<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;addBookmark&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn btn-primary&quot;</span><span class="token operator">&gt;</span>添加书签<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;col-md-12&quot;</span><span class="token operator">&gt;</span>
    根节点创建书签
新书签名：<span class="token operator">&lt;</span>textarea id<span class="token operator">=</span><span class="token string">&quot;newTitle1&quot;</span> cols<span class="token operator">=</span><span class="token string">&quot;30&quot;</span> rows<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>新书签名<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
新书签地址：<span class="token operator">&lt;</span>textarea id<span class="token operator">=</span><span class="token string">&quot;newUrl1&quot;</span> cols<span class="token operator">=</span><span class="token string">&quot;30&quot;</span> rows<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>新书签地址<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;addBookmark1&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn btn-primary&quot;</span><span class="token operator">&gt;</span>添加书签<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

addBookmark<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> pTitle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;pTitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	<span class="token keyword">const</span> newTitle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;newTitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	<span class="token keyword">const</span> newUrl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;newUrl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	<span class="token keyword">let</span> obj
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>pTitle<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   obj <span class="token operator">=</span> <span class="token punctuation">{</span>
		   <span class="token literal-property property">parentId</span><span class="token operator">:</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		   <span class="token literal-property property">title</span><span class="token operator">:</span>newTitle<span class="token punctuation">,</span>
		   <span class="token literal-property property">url</span><span class="token operator">:</span>newUrl
	   <span class="token punctuation">}</span>
	   chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
addBookmark1<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> newTitle1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;newTitle1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	<span class="token keyword">const</span> newUrl1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;newUrl1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	<span class="token keyword">let</span> obj
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>pTitle<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   obj <span class="token operator">=</span> <span class="token punctuation">{</span>
		   <span class="token literal-property property">parentId</span><span class="token operator">:</span><span class="token string">'1'</span><span class="token punctuation">,</span>
		   <span class="token literal-property property">title</span><span class="token operator">:</span>newTitle1<span class="token punctuation">,</span>
		   <span class="token literal-property property">url</span><span class="token operator">:</span>newUrl1
	   <span class="token punctuation">}</span>
	   chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="_8、移动书签"><a href="#_8、移动书签" class="header-anchor">#</a> 8、移动书签</h3> <blockquote><p>chrome.bookmarks.move(string id, object destination, function callback)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//把id为10的页签移动到id为1的节点下面</span>
move<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> obj <span class="token operator">=</span><span class="token punctuation">{</span>
		<span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token string">'1'</span> 
	<span class="token punctuation">}</span>
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">,</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_9、更新书签"><a href="#_9、更新书签" class="header-anchor">#</a> 9、更新书签</h3> <blockquote><p>chrome.bookmarks.update(string id, object changes, function callback)</p> <p><code>目前只支持更新title和url</code></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//把书签id为8的title改为百度1</span>
update<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> obj <span class="token operator">=</span><span class="token punctuation">{</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'百度1'</span>
	<span class="token punctuation">}</span>
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">,</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_10、删除书签或者空书签文件夹"><a href="#_10、删除书签或者空书签文件夹" class="header-anchor">#</a> 10、删除书签或者空书签文件夹</h3> <blockquote><p>chrome.bookmarks.remove(string id, function callback)</p> <p>只能删除单个书签或者空文件夹，如果不是空文件夹则会报错<code>Can't remove non-empty folder (use recursive to force).</code></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>remove<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'272'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_11、删除整个书签树"><a href="#_11、删除整个书签树" class="header-anchor">#</a> 11、删除整个书签树</h3> <blockquote><p>chrome.bookmarks.removeTree(string id, function callback)</p> <p><code>可以删除当前书签和书签文件夹的子节点</code></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>removeTree<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	chrome<span class="token punctuation">.</span>bookmarks<span class="token punctuation">.</span><span class="token function">removeTree</span><span class="token punctuation">(</span><span class="token string">'272'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Chrome" title="标签">#Chrome</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/01/11, 16:22:43</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/fe/VUE02/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Vuex</div></a> <a href="/pages/0f6a0ac99b62ede5/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">防抖与节流函数</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/fe/VUE02/" class="prev">Vuex</a></span> <span class="next"><a href="/pages/0f6a0ac99b62ede5/">防抖与节流函数</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/be/activiti-01/"><div>
            02.SpringBoot集成流程和UI
            <!----></div></a> <span class="date">11-21</span></dt></dl><dl><dd>02</dd> <dt><a href="/data/89085675/"><div>
            Docker安装ELK8.x（踩坑记录）
            <!----></div></a> <span class="date">11-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/be/92765/"><div>
            多线程场景解决方案汇总
            <!----></div></a> <span class="date">10-31</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2024
    <span>赵宇博 | <a href="https://github.com/zhaoyb-coder/" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7a0728f8.js" defer></script><script src="/assets/js/2.1e4db32b.js" defer></script><script src="/assets/js/38.ba7dbc6d.js" defer></script>
  </body>
</html>
